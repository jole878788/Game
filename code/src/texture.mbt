enum Texture {
  Texture(
    FixedArray[(Int, Int, Int, Int)],
    FixedArray[(Int, Int, Int, Int)],
    FixedArray[(Int, Int, Int, Int)],
    FixedArray[(Int, Int, Int, Int)]
  )
}

fn render_rect(rect : (Int, Int, Int, Int), x : Int, y : Int) -> Unit {
  let (x1, y1, x2, y2) = rect
  @wasm4.rect(x + x1 - 1, y + y1 - 1, x2 - x1 + 1, y2 - y1 + 1)
}

fn render_texture(self : Texture, x : Int, y : Int) -> Unit {
  guard let Texture(black, brown, light_brown, gery) = self
  set_main_color_with_transparent(Black)
  for rect in black {
    render_rect(rect, x, y)
  }
  set_draw_color(1, Brown)
  for rect in brown {
    render_rect(rect, x, y)
  }
  set_draw_color(1, LightBrown)
  for rect in light_brown {
    render_rect(rect, x, y)
  }
  set_draw_color(1, Grey)
  for rect in gery {
    render_rect(rect, x, y)
  }
}

let map_texture : Texture = Texture(
  [(1, 1, 160, 160)],
  [
    (5, 5, 6, 73),
    (5, 5, 73, 6),
    (18, 18, 21, 21),
    (29, 18, 42, 21),
    (18, 29, 21, 43),
    (50, 18, 64, 21),
    (18, 51, 21, 65),
    (187, 5, 156, 6),
    (156, 7, 155, 73),
    (95, 18, 110, 21),
    (118, 18, 132, 21),
    (140, 18, 143, 21),
    (140, 29, 143, 44),
    (140, 52, 143, 66),
    (155, 87, 156, 156),
    (5, 87, 6, 156),
    (7, 155, 73, 156),
    (140, 95, 143, 110),
    (140, 118, 143, 132),
    (87, 155, 154, 156),
    (5, 155, 73, 156),
    (140, 140, 143, 143),
    (119, 140, 132, 143),
    (95, 140, 111, 143),
    (155, 5, 156, 73),
    (87, 5, 154, 6),
    (51, 140, 65, 143),
    (29, 140, 43, 143),
    (18, 140, 21, 143),
    (18, 117, 21, 132),
    (18, 95, 21, 109),
  ],
  [
    (7, 73, 22, 73),
    (73, 7, 73, 22),
    (22, 22, 72, 22),
    (22, 22, 22, 72),
    (17, 17, 72, 17),
    (17, 17, 17, 72),
    (3, 22, 16, 38),
    (3, 42, 16, 58),
    (87, 7, 87, 22),
    (87, 17, 144, 17),
    (87, 22, 139, 22),
    (139, 22, 139, 73),
    (144, 17, 144, 73),
    (139, 73, 154, 73),
    (7, 87, 22, 87),
    (139, 87, 154, 87),
    (87, 139, 87, 154),
    (73, 139, 73, 154),
    (139, 87, 139, 139),
    (144, 87, 144, 144),
    (87, 139, 139, 139),
    (87, 144, 144, 144),
    (22, 139, 73, 139),
    (17, 144, 73, 144),
    (17, 87, 17, 144),
    (22, 87, 22, 139),
  ],
  [],
)

let player_texture : Texture = Texture(
  [
    (2, 4, 2, 7),
    (3, 4, 4, 4),
    (4, 5, 4, 5),
    (6, 4, 7, 4),
    (7, 5, 7, 5),
    (11, 4, 11, 6),
    (10, 7, 10, 7),
    (2, 9, 2, 10),
    (11, 9, 11, 10),
    (3, 10, 4, 10),
    (6, 10, 7, 10),
    (9, 10, 10, 10),
    (4, 11, 9, 11),
  ],
  [(5, 9, 8, 9)],
  [
    (2, 1, 4, 1),
    (6, 1, 6, 1),
    (7, 1, 10, 2),
    (1, 2, 3, 2),
    (5, 2, 5, 2),
    (5, 4, 5, 4),
    (8, 4, 8, 5),
    (10, 5, 10, 6),
    (3, 5, 3, 5),
    (5, 5, 6, 5),
    (3, 6, 9, 7),
    (3, 9, 3, 9),
    (5, 10, 5, 10),
    (8, 10, 8, 10),
    (10, 9, 10, 9),
  ],
  [
    (5, 1, 5, 1),
    (4, 2, 4, 2),
    (6, 2, 6, 2),
    (1, 3, 10, 3),
    (9, 4, 9, 5),
    (10, 4, 10, 4),
    (3, 8, 10, 8),
    (4, 9, 4, 9),
    (9, 9, 9, 9),
  ],
)

let jar_texture : Texture = Texture(
  [
    (4, 1, 4, 1),
    (10, 1, 10, 1),
    (5, 2, 5, 3),
    (9, 2, 9, 3),
    (3, 4, 4, 4),
    (10, 4, 11, 4),
    (2, 5, 2, 6),
    (12, 5, 12, 6),
    (1, 7, 1, 8),
    (13, 7, 13, 8),
    (2, 9, 2, 10),
    (12, 9, 12, 10),
    (3, 11, 3, 11),
    (11, 11, 11, 11),
    (4, 12, 4, 12),
    (10, 12, 10, 12),
    (5, 13, 9, 13),
  ],
  [
    (6, 2, 8, 2),
    (7, 3, 8, 3),
    (8, 4, 9, 4),
    (9, 5, 11, 5),
    (10, 6, 11, 6),
    (10, 7, 10, 7),
    (9, 8, 10, 8),
    (9, 9, 9, 9),
    (3, 10, 3, 10),
    (8, 10, 8, 10),
    (4, 11, 7, 11),
  ],
  [
    (5, 1, 9, 1),
    (6, 3, 6, 3),
    (5, 4, 7, 4),
    (3, 5, 8, 9),
    (2, 7, 2, 8),
    (9, 6, 9, 7),
    (4, 10, 7, 10),
  ],
  [
    (5, 12, 9, 12),
    (8, 11, 10, 11),
    (9, 10, 11, 10),
    (10, 9, 11, 9),
    (11, 7, 12, 8),
  ],
)

let skeleton_texture : Texture = Texture(
  [
    (3, 1, 9, 1),
    (2, 2, 2, 3),
    (10, 2, 10, 2),
    (1, 3, 1, 7),
    (3, 4, 4, 5),
    (7, 4, 8, 5),
    (11, 3, 11, 7),
    (5, 6, 6, 6),
    (4, 7, 7, 7),
    (2, 7, 2, 10),
    (3, 8, 10, 8),
    (10, 7, 10, 7),
    (4, 9, 4, 11),
    (9, 9, 9, 10),
    (3, 10, 3, 10),
    (11, 9, 11, 9),
    (10, 10, 11, 10),
    (5, 11, 9, 11),
  ],
  [
    (5, 2, 9, 2),
    (3, 3, 4, 3),
    (10, 5, 10, 5),
    (9, 4, 9, 4),
    (8, 3, 8, 3),
    (3, 9, 3, 9),
    (10, 9, 10, 9),
  ],
  [
    (3, 2, 4, 2),
    (5, 3, 6, 5),
    (7, 3, 8, 3),
    (9, 3, 10, 4),
    (2, 4, 2, 5),
    (9, 5, 9, 5),
    (2, 6, 4, 6),
    (7, 6, 8, 6),
    (10, 6, 10, 6),
    (3, 7, 3, 7),
    (9, 7, 9, 7),
    (6, 9, 8, 9),
    (8, 10, 8, 10),
  ],
  [],
)

let tombstone_texture : Texture = Texture(
  [
    (2, 1, 8, 1),
    (2, 2, 2, 4),
    (8, 2, 8, 4),
    (1, 3, 1, 9),
    (9, 3, 9, 9),
    (2, 10, 2, 11),
    (8, 10, 8, 11),
    (3, 12, 3, 13),
    (7, 12, 7, 13),
    (8, 14, 8, 15),
    (2, 14, 2, 15),
  ],
  [
    (3, 2, 7, 2),
    (3, 3, 3, 3),
    (7, 3, 7, 3),
    (4, 4, 4, 5),
    (6, 4, 6, 5),
    (3, 7, 3, 8),
    (7, 7, 7, 8),
    (4, 9, 6, 9),
    (5, 10, 5, 10),
    (5, 13, 5, 13),
  ],
  [
    (4, 3, 6, 3),
    (5, 4, 5, 5),
    (2, 5, 2, 9),
    (8, 5, 8, 9),
    (4, 7, 4, 8),
    (6, 7, 6, 8),
    (3, 9, 3, 11),
    (7, 9, 7, 11),
    (5, 8, 5, 8),
    (5, 11, 5, 12),
    (3, 15, 7, 15),
  ],
  [
    (3, 4, 3, 5),
    (7, 4, 7, 5),
    (3, 6, 7, 6),
    (5, 7, 5, 7),
    (4, 10, 4, 13),
    (6, 10, 6, 13),
    (3, 12, 7, 12),
  ],
)

let slingshot_texture : Texture = Texture(
  [
    (8, 1, 9, 1),
    (7, 2, 8, 2),
    (7, 3, 7, 3),
    (6, 3, 6, 4),
    (5, 5, 5, 5),
    (4, 6, 4, 9),
    (4, 10, 8, 10),
    (3, 11, 3, 11),
    (1, 12, 2, 12),
    (9, 9, 9, 9),
    (9, 7, 9, 7),
    (10, 8, 10, 8),
    (10, 6, 10, 6),
    (11, 5, 11, 7),
  ],
  [(9, 2, 9, 6), (10, 7, 10, 7), (11, 8, 11, 8)],
  [],
  [
    (7, 1, 7, 1),
    (6, 2, 6, 2),
    (5, 3, 5, 3),
    (4, 4, 5, 4),
    (4, 5, 4, 5),
    (3, 5, 3, 10),
    (2, 10, 2, 10),
    (1, 11, 2, 11),
    (5, 8, 5, 8),
    (5, 9, 8, 9),
    (8, 8, 9, 8),
  ],
)

let bug_texture : Texture = Texture(
  [
    (7, 1, 10, 1),
    (4, 2, 6, 2),
    (11, 2, 11, 2),
    (3, 3, 3, 3),
    (2, 4, 5, 4),
    (9, 4, 9, 8),
    (1, 5, 1, 5),
    (2, 6, 2, 6),
    (4, 6, 4, 6),
    (6, 5, 6, 5),
    (7, 5, 7, 8),
    (10, 6, 11, 6),
    (1, 7, 1, 9),
    (3, 8, 4, 9),
    (6, 7, 6, 9),
    (11, 8, 11, 8),
    (8, 9, 8, 9),
    (2, 10, 2, 10),
    (5, 10, 5, 10),
  ],
  [
    (9, 3, 10, 3),
    (6, 4, 7, 4),
    (10, 4, 10, 5),
    (11, 5, 11, 5),
    (8, 5, 8, 6),
    (5, 6, 5, 8),
    (6, 6, 6, 6),
    (4, 7, 4, 7),
    (2, 8, 2, 8),
  ],
  [
    (7, 2, 10, 2),
    (4, 3, 8, 3),
    (11, 3, 11, 4),
    (8, 4, 8, 4),
    (2, 5, 5, 5),
    (1, 6, 1, 6),
    (3, 6, 3, 7),
    (2, 7, 2, 7),
    (11, 7, 11, 7),
    (8, 8, 8, 8),
    (2, 9, 2, 9),
    (5, 9, 5, 9),
  ],
  [],
)

let sword_texture : Texture = Texture(
  [
    (11, 1, 13, 1),
    (13, 2, 13, 3),
    (4, 5, 5, 5),
    (5, 6, 5, 6),
    (2, 9, 2, 10),
    (3, 9, 3, 9),
    (8, 9, 8, 10),
    (9, 10, 9, 10),
    (1, 11, 1, 13),
    (5, 11, 5, 11),
    (4, 12, 5, 12),
    (7, 12, 7, 12),
    (2, 13, 3, 13),
  ],
  [
    (2, 11, 3, 12),
    (4, 10, 4, 10),
    (5, 9, 5, 9),
    (6, 8, 6, 8),
    (7, 7, 7, 7),
    (8, 6, 8, 6),
    (9, 5, 9, 5),
    (10, 4, 10, 4),
    (11, 3, 11, 3),
    (4, 7, 4, 8),
    (6, 10, 7, 10),
    (8, 11, 8, 11),
    (3, 6, 3, 6),
  ],
  [
    (6, 7, 6, 7),
    (7, 6, 7, 6),
    (8, 5, 8, 5),
    (9, 4, 9, 4),
    (10, 3, 10, 3),
    (7, 8, 7, 8),
    (8, 7, 8, 7),
    (9, 6, 9, 6),
    (10, 5, 10, 5),
    (11, 4, 11, 4),
  ],
  [
    (2, 5, 2, 6),
    (3, 5, 3, 5),
    (4, 6, 4, 6),
    (3, 7, 3, 8),
    (5, 7, 5, 8),
    (3, 10, 3, 10),
    (4, 11, 4, 11),
    (5, 10, 5, 10),
    (4, 9, 4, 9),
    (6, 9, 7, 9),
    (6, 11, 7, 11),
    (8, 12, 8, 12),
    (9, 11, 9, 12),
    (6, 6, 6, 6),
    (7, 5, 7, 5),
    (8, 4, 8, 4),
    (9, 3, 9, 3),
    (10, 2, 11, 2),
    (12, 2, 12, 4),
    (8, 8, 8, 8),
    (9, 7, 9, 7),
    (10, 6, 10, 6),
    (11, 5, 11, 5),
  ],
)

let mummy_texture : Texture = Texture(
  [
    (2, 2, 2, 6),
    (3, 1, 3, 1),
    (9, 1, 9, 1),
    (10, 2, 10, 6),
    (4, 4, 4, 4),
    (7, 4, 7, 4),
    (3, 6, 3, 7),
    (4, 7, 4, 7),
    (5, 5, 6, 7),
    (7, 7, 9, 7),
    (9, 6, 9, 6),
    (1, 8, 2, 8),
    (4, 8, 4, 9),
    (8, 8, 8, 9),
    (10, 8, 11, 8),
    (1, 9, 1, 10),
    (2, 10, 2, 10),
    (3, 9, 3, 10),
    (5, 10, 6, 10),
    (11, 9, 11, 9),
    (9, 9, 9, 10),
    (10, 10, 11, 10),
    (3, 11, 9, 11),
  ],
  [
    (4, 1, 8, 1),
    (4, 3, 4, 3),
    (7, 3, 7, 3),
    (3, 5, 4, 5),
    (8, 5, 8, 6),
    (9, 5, 9, 5),
    (4, 6, 4, 6),
    (6, 9, 7, 9),
    (4, 10, 4, 10),
    (7, 10, 8, 10),
  ],
  [
    (3, 2, 9, 2),
    (3, 3, 3, 4),
    (5, 3, 6, 4),
    (8, 3, 9, 4),
    (7, 5, 7, 6),
    (3, 8, 3, 8),
    (2, 9, 2, 9),
    (5, 8, 5, 9),
    (6, 8, 7, 8),
    (9, 8, 9, 8),
    (10, 9, 10, 9),
  ],
  [],
)
